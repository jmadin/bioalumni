<% if @user.photos.empty? %>
	<p class="alert alert-danger">No photos yet.</p>
<% else %>

  <div class="row">
    <div class="col-md-12">
      <h1>Photos</h1>
    </div>
  </div><small>*Notes that Tags and Search operate independently</small>

  <div class="well">
    <div class="row">
      <div class="col-md-5">
        <div id="tag_cloud">
          <% tag_cloud Photo.tag_counts.sort { |x, y| x.name <=> y.name }, %w{s m l} do |tag, css_class| %>
            <%= link_to tag.name, tags_user_path(tag.name, :id => @user), class: css_class, class: "label label-primary"  %>
          <% end %>
        </div><br>
      </div>
      <div class="col-md-5">
        <%= form_tag user_path(@user), :method => 'get' do %>
          <div class="input-group">
            <%= text_field_tag :search, params[:search], :placeholder => "Search text...", class: "form-control" %>
            <span class="input-group-btn">
              <%= submit_tag "Search", :name => nil, class: "btn btn-default" %>
              
            </span>
          </div><br>
      </div>
        <div class="col-md-2">
          <%= link_to 'Reset', user_path(@user), class: "btn btn-default pull-right" %>
        </div>
      <% end %>
    </div>
  </div>

  <%= will_paginate @photos %>

  <table class="table">
    <thead>
      <tr>
        <th></th>
        <th>Tags</th>
        <th><%= sortable "photo_filename", "Filename" %></th>
        <th><%= sortable "user_id", "Photographer" %></th>
        <th><%= sortable "photo_date", "Year" %></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <% @photos.each do |photo| %>
        <tr>

          <td><%= link_to(image_tag(photo.photograph.url(:thumb)), image_path(photo.photograph.url(:original))) %></td>
          <td>
            <% photo.tag_list.each do |t| %>
              <%= link_to t, tags_user_path(t, :id => @user), class: "label label-primary", :target => "_blank" %>
            <% end %>
          </td>
          <td><%= photo.photo_filename %></td>
          <td><%= link_to photo.user.name, "/users/" + photo.user_id.to_s %></td>
          <td><%= photo.photo_date.strftime("%Y") %></td>
          <td style="width:150px;">
            <div class="btn-group">
              <%= link_to 'Show', photo, class: "btn btn-sm btn-default" %>
              <%= link_to 'Edit', edit_photo_path(photo), class: "btn btn-sm btn-default" %>
            </div>
            <% if signed_in? && current_user.admin? %>
              <%= link_to 'X', photo, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-sm btn-default btn-danger" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <%= will_paginate @photos %>

<% end %>

